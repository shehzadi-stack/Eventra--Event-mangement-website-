<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>login page of eventra</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

    <style>
      .vline {
        border-left: 5px solid black;
        height: 700px;
        position: absolute;
        margin-top: 30px;
      }
      .logout-btn {
        position: absolute;
        right: 20px;
        top: 10px;
      }
    </style>

    <script>
      window.onload = function () {
        if (localStorage.getItem("isLoggedIn") !== "true") {
          alert("Please login first!");
          window.location.href = "index.html";
        }
      };
      window.onload = function () {
        document.getElementById("name").value =
          localStorage.getItem("Name") || "";

        document.getElementById("dob").value =
          localStorage.getItem("dob") || "";

        document.getElementById("address").value =
          localStorage.getItem("Address") || "";

        document.getElementById("pin").value =
          localStorage.getItem("Pincode") || "";

        document.getElementById("email").value =
          localStorage.getItem("email") || "";

        document.getElementById("password").value =
          localStorage.getItem("password") || "";

        let gender = localStorage.getItem("Gender");
        if (gender === "Male") document.getElementById("male").checked = true;
        if (gender === "Female")
          document.getElementById("female").checked = true;

        // Login panel autofill
        document.getElementById("loginEmail").value =
          localStorage.getItem("email") || "";

        document.getElementById("loginPassword").value =
          localStorage.getItem("password") || "";
      };

      // Save Registration
      function a() {
        let name = document.getElementById("name").value;
        let dob = document.getElementById("dob").value;
        let gender = document.querySelector(
          'input[name="gender"]:checked',
        )?.value;
        let address = document.getElementById("address").value;
        let pin = document.getElementById("pin").value;
        let email = document.getElementById("email").value;
        let password = document.getElementById("password").value;

        if (
          !name ||
          !dob ||
          !gender ||
          !address ||
          !pin ||
          !email ||
          !password
        ) {
          alert("Please fill all fields!");
          return;
        }

        // ðŸ”´ IMPORTANT: Use SAME keys as registration page
        localStorage.setItem("Name", name);
        localStorage.setItem("dob", dob);
        localStorage.setItem("Gender", gender);
        localStorage.setItem("Address", address);
        localStorage.setItem("Pincode", pin);
        localStorage.setItem("email", email);
        localStorage.setItem("password", password);

        alert("Registration Successful! You can now log in.");
      }

      function loginUser() {
        let loginEmail = document.getElementById("loginEmail").value;
        let loginPassword = document.getElementById("loginPassword").value;

        let storedEmail = localStorage.getItem("email");
        let storedPassword = localStorage.getItem("password");

        if (loginEmail === storedEmail && loginPassword === storedPassword) {
          alert("Login Successful! Welcome " + localStorage.getItem("Name"));

          // âœ… Navigate to Auto Billing page
          window.location.href = "auto.html";
        } else {
          alert("Invalid Email or Password! Please try again.");
        }
      }
      function logoutUser() {
        // Remove login session only (not registration data)
        localStorage.removeItem("isLoggedIn");

        alert("Logged out successfully!");

        // Redirect to registration page
        window.location.href = "login.html";
      }
    </script>
  </head>

  <body>
    <div class="container mt-2" style="background-color: #ecdb9e">
      <!-- Header -->
      <div class="row">
        <div
          class="bg-primary text-center text-light d-flex align-items-center"
        >
          <img src="logo.webp" alt="" style="height: 50px" />
          <h1 class="ms-3 mt-2">Eventra</h1>
          <button class="btn btn-secondary ms-auto" onclick="logoutUser()">
            Logout
          </button>
        </div>
      </div>

      <!-- Title -->
      <div class="container mt-3">
        <h1 class="text-center alert alert-success">
          <b>Thank youðŸ˜ƒ</b> for Registration......
        </h1>
      </div>

      <!-- Main Section -->
      <div class="container mt-2">
        <div class="row">
          <!-- Login -->
          <div class="col-sm-5">
            <h2 class="text-primary text-center text-decoration-underline">
              Login Panel
            </h2>

            <div class="mt-3">
              <label class="form-label fw-bold">Email:</label>
              <input type="email" class="form-control" id="loginEmail" />
            </div>

            <div class="mb-3">
              <label class="form-label fw-bold">Password:</label>
              <input type="password" class="form-control" id="loginPassword" />
            </div>

            <button type="button" onclick="loginUser()" class="btn btn-danger">
              Login
            </button>
          </div>

          <!-- Line -->
          <div class="col-2 mt-2 position-relative">
            <div class="vline"></div>
          </div>

          <!-- Registration -->
          <div class="col-sm-5">
            <h2 class="text-primary text-center text-decoration-underline">
              Your Details
            </h2>

            <div class="mb-3">
              <label class="form-label fw-bold">Full Name:</label>
              <input type="text" class="form-control" id="name" />
            </div>

            <div class="mb-3">
              <label class="form-label fw-bold">Date of Birth:</label>
              <input type="date" class="form-control" id="dob" />
            </div>

            <div class="mb-3">
              <label class="form-label fw-bold">Gender:</label><br />
              <input
                class="form-check-input"
                type="radio"
                name="gender"
                id="male"
                value="Male"
              />
              <label class="form-check-label me-3" for="male">Male</label>

              <input
                class="form-check-input"
                type="radio"
                name="gender"
                id="female"
                value="Female"
              />
              <label class="form-check-label" for="female">Female</label>
            </div>

            <div class="mb-3">
              <label class="form-label fw-bold">Address:</label>
              <textarea class="form-control" id="address"></textarea>
            </div>

            <div class="mb-3">
              <label class="form-label fw-bold">PIN Code:</label>
              <input type="text" class="form-control" id="pin" />
            </div>

            <div class="mb-3">
              <label class="form-label fw-bold">Email:</label>
              <input type="email" class="form-control" id="email" />
            </div>

            <div class="mb-3">
              <label class="form-label fw-bold">Password:</label>
              <input type="password" class="form-control" id="password" />
            </div>

            <button
              type="button"
              onclick="loginUser()"
              class="btn btn-danger ms-5 fw-bold"
            >
              Submit
            </button>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="container mt-3">
        <div class="text-center text-light p-3 bg-primary">
          <h5>&copy; Eventra | 2025 | All Rights Reserved</h5>
        </div>
      </div>
    </div>
  </body>
  `
</html>
